<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SCMXPertLite - My Shipment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="/static/myShipment.css?v=4" />
</head>
<body>

<!-- Sidebar Navbar -->
<nav class="sidebar">
  <div class="logo-container">
    <img src="/images/logo.png" alt="Exafluence Logo" class="company-logo" />
    <span class="company-name">Exafluence</span>
  </div>
  <ul class="navbar-nav">
    <li class="nav-item"><a class="nav-link" href="/dashboard"><i class="fa-solid fa-chart-column"></i> Dashboard</a></li>
    <li class="nav-item"><a class="nav-link" href="/MyAccount"><i class="fas fa-user-circle"></i> My Account</a></li>
    <li class="nav-item"><a class="nav-link" href="/shipment"><i class="fa-solid fa-truck-fast"></i> Shipment</a></li>
    <li class="nav-item"><a class="nav-link" href="/myShipment"><i class="fa-solid fa-cart-arrow-down"></i> My Shipment</a></li>
    <li class="nav-item">
      {% if user.role == "Admin" %}
      <a class="nav-link text-white" href="/deviceData" id="deviceDataBtn">
        <i class="fas fa-database me-1"></i> Device Data
      </a>
      {% else %}
      <span class="nav-link disabled-nav" style="cursor: not-allowed;">
        <i class="fas fa-database me-1"></i> Device Data
      </span>
      {% endif %}
    </li>
    <li class="nav-item mt-auto"><a class="navbar-logout" href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
  </ul>
</nav>

<div class="main-content">
  <div class="greet">My Shipments</div>

  {% if shipments %}
  <div class="table-responsive mt-5">
    <table class="table table-bordered table-striped table-hover shipment-table">
      <thead >
        <tr>
          <th>Shipment No</th>
          <th>User Name</th>
          <th>Email</th>
          <th>Route Details</th>
          <th>Device ID</th>
          <th>PO No</th>
          <th>NDC No</th>
          <th>No. of Goods</th>
          <th>Container No</th>
          <th>Goods Type</th>
          <th>Expected Delivery</th>
          <th>Delivery No</th>
          <th>Batch ID</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {% for shipment in shipments %}
        <tr>
          <td>{{ shipment.ShipNum }}</td>
          <td>{{ shipment.uname }}</td>
          <td>{{ shipment.uemail }}</td>
          <td>{{ shipment.RoutDet }}</td>
          <td>{{ shipment.Device }}</td>
          <td>{{ shipment.PoNum }}</td>
          <td>{{ shipment.NdcNum }}</td>
          <td>{{ shipment.SeNumOfGoods }}</td>
          <td>{{ shipment.ContNum }}</td>
          <td>{{ shipment.GoodType }}</td>
          <td>{{ shipment.ExpDelDate }}</td>
          <td>{{ shipment.DelNum }}</td>
          <td>{{ shipment.BatchId }}</td>
          <td>{{ shipment.ShipDes }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="no-shipments">No shipments found.</div>
  {% endif %}
</div>

<script>
  // Session timeout logic (10 minutes)
  let sessionTimeout = 10 * 60 * 1000;
  let timeout;

  function startSessionTimeout() {
    clearTimeout(timeout);
    timeout = setTimeout(() => window.location.href = "/logout", sessionTimeout);
  }

  document.addEventListener("mousemove", startSessionTimeout);
  document.addEventListener("keydown", startSessionTimeout);

</script>

</body>
</html>
